<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 480">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-en { font: 500 9px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; }
      .title { font: 600 14px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; letter-spacing: 1px; }
      .annotation { font: 400 9px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; }
      .hook-label { font: 600 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #7c3aed; }
      .col-header { font: 600 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; letter-spacing: 0.5px; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7c3aed"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="680" height="480" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="28" class="title">HOOK EXECUTION FLOW</text>
  <text x="340" y="45" class="label">Hooks 事件触发流程</text>

  <!-- Column Headers -->
  <text x="180" y="75" class="col-header">AGENT 执行流程</text>
  <text x="500" y="75" class="col-header">HOOK 触发点</text>

  <!-- Vertical divider -->
  <line x1="340" y1="85" x2="340" y2="460" stroke="#e5e7eb" stroke-width="1" stroke-dasharray="4,2"/>

  <!-- Step 1: Workflow Started -->
  <g transform="translate(0, 95)">
    <rect x="80" y="0" width="200" height="35" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="180" y="22" class="box-text">开始工作流</text>

    <line x1="280" y1="17" x2="380" y2="17" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

    <rect x="385" y="0" width="200" height="35" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5" rx="2"/>
    <text x="485" y="22" class="hook-label">WORKFLOW_STARTED</text>
  </g>

  <!-- Arrow down -->
  <line x1="180" y1="135" x2="180" y2="150" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Step 2: Agent Thinking -->
  <g transform="translate(0, 155)">
    <rect x="80" y="0" width="200" height="35" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="180" y="22" class="box-text">Agent 开始思考</text>

    <line x1="280" y1="17" x2="380" y2="17" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

    <rect x="385" y="0" width="200" height="35" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5" rx="2"/>
    <text x="485" y="22" class="hook-label">AGENT_THINKING</text>
  </g>

  <!-- Arrow down -->
  <line x1="180" y1="195" x2="180" y2="210" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Step 3: Tool Invoked -->
  <g transform="translate(0, 215)">
    <rect x="80" y="0" width="200" height="35" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="180" y="22" class="box-text">调用工具</text>

    <line x1="280" y1="17" x2="380" y2="17" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

    <rect x="385" y="0" width="200" height="35" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5" rx="2"/>
    <text x="485" y="22" class="hook-label">TOOL_INVOKED</text>
  </g>

  <!-- Arrow down -->
  <line x1="180" y1="255" x2="180" y2="270" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Step 4: Tool Observation -->
  <g transform="translate(0, 275)">
    <rect x="80" y="0" width="200" height="35" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="180" y="22" class="box-text">获得结果</text>

    <line x1="280" y1="17" x2="380" y2="17" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

    <rect x="385" y="0" width="200" height="35" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5" rx="2"/>
    <text x="485" y="22" class="hook-label">TOOL_OBSERVATION</text>
  </g>

  <!-- Arrow down -->
  <line x1="180" y1="315" x2="180" y2="330" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Step 5: Approval Requested -->
  <g transform="translate(0, 335)">
    <rect x="80" y="0" width="200" height="35" fill="#fce7f3" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="180" y="22" class="box-text">需要审批?</text>

    <line x1="280" y1="17" x2="380" y2="17" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

    <rect x="385" y="0" width="200" height="35" fill="#fce7f3" stroke="#7c3aed" stroke-width="1.5" rx="2"/>
    <text x="485" y="15" class="hook-label">APPROVAL_REQUESTED</text>
    <text x="485" y="28" class="annotation">(等待人工决策)</text>
  </g>

  <!-- Arrow down -->
  <line x1="180" y1="375" x2="180" y2="390" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Step 6: Agent Completed -->
  <g transform="translate(0, 395)">
    <rect x="80" y="0" width="200" height="35" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
    <text x="180" y="22" class="box-text">Agent 完成</text>

    <line x1="280" y1="17" x2="380" y2="17" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

    <rect x="385" y="0" width="200" height="35" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5" rx="2"/>
    <text x="485" y="22" class="hook-label">AGENT_COMPLETED</text>
  </g>

  <!-- Legend -->
  <g transform="translate(50, 450)">
    <rect x="0" y="0" width="12" height="12" fill="#ede9fe" stroke="#7c3aed" stroke-width="1"/>
    <text x="20" y="10" class="annotation">Hook 事件 (可订阅)</text>
  </g>
</svg>
