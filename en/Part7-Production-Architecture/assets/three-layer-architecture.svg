<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 520">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 14px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-sm { font: 500 11px 'SF Mono', 'PingFang SC', monospace; fill: #444; }
      .layer-title { font: 700 13px 'SF Mono', 'Menlo', monospace; fill: #1a1a1a; text-anchor: middle; }
      .protocol { font: 600 10px 'SF Mono', monospace; fill: #3b82f6; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'PingFang SC', sans-serif; fill: #1a1a1a; text-anchor: middle; }
      .feature { font: 400 10px 'SF Mono', 'PingFang SC', monospace; fill: #444; text-anchor: start; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <!-- Hatching patterns -->
    <pattern id="hatch-go" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#60a5fa" stroke-width="0.5" opacity="0.3"/>
    </pattern>
    <pattern id="hatch-rust" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#f59e0b" stroke-width="0.5" opacity="0.3"/>
    </pattern>
    <pattern id="hatch-python" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#10b981" stroke-width="0.5" opacity="0.3"/>
    </pattern>
  </defs>

  <!-- Background -->
  <rect width="680" height="520" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="35" class="title">Production Three-Layer Architecture</text>
  <text x="340" y="52" class="label">PRODUCTION THREE-LAYER ARCHITECTURE</text>

  <!-- Layer 1: Orchestrator (Go) -->
  <rect x="80" y="75" width="520" height="120" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="3"/>
  <rect x="80" y="75" width="520" height="120" fill="url(#hatch-go)" rx="3"/>

  <rect x="540" y="80" width="50" height="18" fill="#60a5fa" stroke="none" rx="9"/>
  <text x="565" y="93" style="font: 600 10px 'SF Mono'; fill: #fff; text-anchor: middle;">Go</text>

  <text x="340" y="100" class="layer-title">Orchestrator Layer</text>

  <rect x="100" y="110" width="110" height="70" fill="#fff" stroke="#60a5fa" stroke-width="1" rx="2"/>
  <text x="155" y="130" class="feature">Temporal</text>
  <text x="155" y="145" class="feature">Workflows</text>

  <rect x="230" y="110" width="110" height="70" fill="#fff" stroke="#60a5fa" stroke-width="1" rx="2"/>
  <text x="285" y="130" class="feature">Budget</text>
  <text x="285" y="145" class="feature">Control</text>

  <rect x="360" y="110" width="110" height="70" fill="#fff" stroke="#60a5fa" stroke-width="1" rx="2"/>
  <text x="415" y="130" class="feature">Pattern</text>
  <text x="415" y="145" class="feature">Router</text>

  <rect x="490" y="110" width="100" height="70" fill="#fff" stroke="#60a5fa" stroke-width="1" rx="2"/>
  <text x="540" y="130" class="feature">Result</text>
  <text x="540" y="145" class="feature">Synthesis</text>

  <!-- Arrow 1 -->
  <line x1="340" y1="195" x2="340" y2="235" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <rect x="310" y="205" width="60" height="20" fill="#fff"/>
  <text x="340" y="220" class="protocol">gRPC</text>

  <!-- Layer 2: Agent Core (Rust) -->
  <rect x="80" y="245" width="520" height="120" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="3"/>
  <rect x="80" y="245" width="520" height="120" fill="url(#hatch-rust)" rx="3"/>

  <rect x="530" y="250" width="60" height="18" fill="#f59e0b" stroke="none" rx="9"/>
  <text x="560" y="263" style="font: 600 10px 'SF Mono'; fill: #fff; text-anchor: middle;">Rust</text>

  <text x="340" y="270" class="layer-title">Agent Core Layer</text>

  <rect x="100" y="280" width="110" height="70" fill="#fff" stroke="#f59e0b" stroke-width="1" rx="2"/>
  <text x="155" y="300" class="feature">WASI</text>
  <text x="155" y="315" class="feature">Sandbox</text>

  <rect x="230" y="280" width="110" height="70" fill="#fff" stroke="#f59e0b" stroke-width="1" rx="2"/>
  <text x="285" y="300" class="feature">Memory</text>
  <text x="285" y="315" class="feature">Limits</text>

  <rect x="360" y="280" width="110" height="70" fill="#fff" stroke="#f59e0b" stroke-width="1" rx="2"/>
  <text x="415" y="300" class="feature">Timeout</text>
  <text x="415" y="315" class="feature">Enforcement</text>

  <rect x="490" y="280" width="100" height="70" fill="#fff" stroke="#f59e0b" stroke-width="1" rx="2"/>
  <text x="540" y="300" class="feature">Resource</text>
  <text x="540" y="315" class="feature">Isolation</text>

  <!-- Arrow 2 -->
  <line x1="340" y1="365" x2="340" y2="405" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <rect x="305" y="375" width="70" height="20" fill="#fff"/>
  <text x="340" y="390" class="protocol">HTTP</text>

  <!-- Layer 3: LLM Service (Python) -->
  <rect x="80" y="415" width="520" height="90" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="3"/>
  <rect x="80" y="415" width="520" height="90" fill="url(#hatch-python)" rx="3"/>

  <rect x="515" y="420" width="75" height="18" fill="#10b981" stroke="none" rx="9"/>
  <text x="553" y="433" style="font: 600 10px 'SF Mono'; fill: #fff; text-anchor: middle;">Python</text>

  <text x="340" y="440" class="layer-title">LLM Service Layer</text>

  <rect x="100" y="455" width="110" height="40" fill="#fff" stroke="#10b981" stroke-width="1" rx="2"/>
  <text x="155" y="480" class="feature">Multi-Provider</text>

  <rect x="230" y="455" width="110" height="40" fill="#fff" stroke="#10b981" stroke-width="1" rx="2"/>
  <text x="285" y="480" class="feature">Tool Selection</text>

  <rect x="360" y="455" width="110" height="40" fill="#fff" stroke="#10b981" stroke-width="1" rx="2"/>
  <text x="415" y="480" class="feature">Vector Store</text>

  <rect x="490" y="455" width="100" height="40" fill="#fff" stroke="#10b981" stroke-width="1" rx="2"/>
  <text x="540" y="480" class="feature">Streaming</text>
</svg>
