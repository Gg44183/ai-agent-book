<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 520">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 14px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-sm { font: 500 11px 'SF Mono', 'PingFang SC', monospace; fill: #444; }
      .layer-title { font: 700 13px 'SF Mono', 'Menlo', monospace; fill: #1a1a1a; text-anchor: middle; }
      .protocol { font: 600 10px 'SF Mono', monospace; fill: #3b82f6; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'PingFang SC', sans-serif; fill: #1a1a1a; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <!-- Hatching pattern for depth -->
    <pattern id="diagonal-go" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#60a5fa" stroke-width="0.5" opacity="0.3"/>
    </pattern>
    <pattern id="diagonal-rust" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#f59e0b" stroke-width="0.5" opacity="0.3"/>
    </pattern>
    <pattern id="diagonal-python" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#fde047" stroke-width="0.5" opacity="0.3"/>
    </pattern>
  </defs>

  <!-- Background -->
  <rect width="680" height="520" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="35" class="title">Shannon Three-Layer Architecture</text>
  <text x="340" y="52" class="label">THREE-LAYER ARCHITECTURE</text>

  <!-- Layer 1: Orchestrator (Go) - Blue -->
  <rect x="80" y="75" width="520" height="120" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="3"/>
  <rect x="80" y="75" width="520" height="120" fill="url(#diagonal-go)" rx="3"/>
  <text x="340" y="100" class="layer-title">Orchestrator (Go)</text>

  <!-- Inner box with features -->
  <rect x="100" y="110" width="480" height="70" fill="#fff" stroke="#60a5fa" stroke-width="1" rx="2"/>
  <text x="120" y="132" class="box-text-sm">• Task routing and orchestration patterns</text>
  <text x="120" y="150" class="box-text-sm">• Token budget allocation and tracking</text>
  <text x="350" y="132" class="box-text-sm">• Multi-agent coordination</text>
  <text x="350" y="150" class="box-text-sm">• Result synthesis</text>

  <!-- Arrow 1: Orchestrator -> Agent Core -->
  <line x1="340" y1="195" x2="340" y2="235" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <rect x="310" y="205" width="60" height="20" fill="#fff" stroke="none"/>
  <text x="340" y="220" class="protocol">gRPC</text>

  <!-- Layer 2: Agent Core (Rust) - Orange -->
  <rect x="80" y="245" width="520" height="120" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="3"/>
  <rect x="80" y="245" width="520" height="120" fill="url(#diagonal-rust)" rx="3"/>
  <text x="340" y="270" class="layer-title">Agent Core (Rust)</text>

  <!-- Inner box with features -->
  <rect x="100" y="280" width="480" height="70" fill="#fff" stroke="#f59e0b" stroke-width="1" rx="2"/>
  <text x="120" y="302" class="box-text-sm">• Single agent execution (LLM + tool calls)</text>
  <text x="120" y="320" class="box-text-sm">• WASI sandbox execution (high-risk code)</text>
  <text x="400" y="302" class="box-text-sm">• Tool calls and isolation</text>
  <text x="400" y="320" class="box-text-sm">• Resource limits and timeout</text>

  <!-- Arrow 2: Agent Core -> LLM Service -->
  <line x1="340" y1="365" x2="340" y2="405" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <rect x="305" y="375" width="70" height="20" fill="#fff" stroke="none"/>
  <text x="340" y="390" class="protocol">HTTP</text>

  <!-- Layer 3: LLM Service (Python) - Yellow/Green -->
  <rect x="80" y="415" width="520" height="120" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="3"/>
  <rect x="80" y="415" width="520" height="120" fill="url(#diagonal-python)" rx="3"/>
  <text x="340" y="440" class="layer-title">LLM Service (Python)</text>

  <!-- Inner box with features -->
  <rect x="100" y="450" width="480" height="70" fill="#fff" stroke="#10b981" stroke-width="1" rx="2"/>
  <text x="120" y="472" class="box-text-sm">• Multi-provider LLM calls</text>
  <text x="120" y="490" class="box-text-sm">• Tool definition and execution</text>
  <text x="380" y="472" class="box-text-sm">• Vector storage and retrieval</text>
  <text x="380" y="490" class="box-text-sm">• Prompt management</text>

  <!-- Language badges -->
  <rect x="545" y="80" width="45" height="18" fill="#60a5fa" stroke="none" rx="9"/>
  <text x="568" y="93" style="font: 600 10px 'SF Mono'; fill: #fff; text-anchor: middle;">Go</text>

  <rect x="535" y="250" width="55" height="18" fill="#f59e0b" stroke="none" rx="9"/>
  <text x="563" y="263" style="font: 600 10px 'SF Mono'; fill: #fff; text-anchor: middle;">Rust</text>

  <rect x="525" y="420" width="65" height="18" fill="#10b981" stroke="none" rx="9"/>
  <text x="558" y="433" style="font: 600 10px 'SF Mono'; fill: #fff; text-anchor: middle;">Python</text>
</svg>
